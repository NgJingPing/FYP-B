CREATE DATABASE anprdb;

USE anprdb;

CREATE TABLE tenant (
    tenantLotNumber VARCHAR(6) PRIMARY KEY NOT NULL
    );
    
CREATE TABLE vehicle (
     licensePlate VARCHAR(20) PRIMARY KEY NOT NULL,
     tenantLotNumber VARCHAR(6) NOT NULL, 
     brand VARCHAR(20) NOT NULL,
     model VARCHAR(20) NOT NULL,
     colour VARCHAR(20) NOT NULL,
     FOREIGN KEY(tenantLotNumber) REFERENCES tenant(tenantLotNumber)
     );

CREATE TABLE entryLog (
    referenceID INT(10) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    licensePlate VARCHAR(20) NOT NULL, 
    entryTime DATETIME NOT NULL,
    image blob NOT NULL,
    FOREIGN KEY(licensePlate) REFERENCES vehicle(licensePlate)
    );
    
CREATE TABLE exitLog (
    referenceID INT(10) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    licensePlate VARCHAR(20) NOT NULL, 
    exitTime DATETIME NOT NULL,
    image blob NOT NULL,
    FOREIGN KEY(licensePlate) REFERENCES vehicle(licensePlate)
    );    

CREATE TABLE deniedAccess(
    referenceID INT(10) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    licensePlate VARCHAR(20) NOT NULL, 
    deniedTime DATETIME NOT NULL,
    image blob NOT NULL
    );  
    
CREATE TABLE admin (
    adminID INT(4) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    email VARCHAR(256) NOT NULL,
    password VARCHAR(256) NOT NULL,
    isAdvanced BOOLEAN NOT NULL
    );
    
CREATE TABLE security (
    securityID INT(4) PRIMARY KEY AUTO_INCREMENT NOT NULL,
    email VARCHAR(256) NOT NULL,
    password VARCHAR(256) NOT NULL
    );

